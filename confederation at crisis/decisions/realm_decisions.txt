decisions = {
	form_new_kingdom = {
		only_independent = yes
		is_high_prio = yes
		
		potential = {
			is_playable = yes
			tier = DUKE
			NOT = { tier = KING }
			
			has_dlc = "Charlemagne"
			
			holy_order = no
			
			NOT = {
				has_game_rule = {
					name = dynamic_realms
					value = off
				}
			}
			
			OR = {
				ai = no
				AND = {
					trait = proud
					prestige = 5000
				}
				AND = {
					trait = ambitious
					prestige = 5000
				}
				AND = {
					realm_size = 70
					any_demesne_title = {
						count = 4
						tier = DUKE
					}
				}
				prestige = 15000
			}
		}
		allow = {
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			independent = yes
			prestige = 1000
			OR = {
				realm_size = 35
				custom_tooltip = {
					text = form_new_kingdom_requirement_tooltip
					hidden_tooltip = {
						any_demesne_title = {
							count = 3
							tier = DUKE
						}
					}
				}
			}
			wealth = 300
		}
		effect = {
			primary_title = {
				create_title = {
					tier = KING
					landless = no
					temporary = no
					custom_created = yes
					culture = ROOT
					holder = ROOT
					base_title = THIS
					copy_title_laws = ROOT
				}

				hidden_tooltip = {
					empire = {
						ROOT = {
							primary_title = {
								de_jure_liege = PREVPREV
							}
						}
					}

					ROOT = {
						primary_title = {
							holder_scope = {
								any_title_under = {
									limit = {
										tier = DUKE
										kingdom = {
											has_holder = no
										}
									}
									de_jure_liege = PREVPREV
								}
								any_title_under = {
									limit = {
										tier = COUNT
										location = {
											duchy = {
												kingdom = {
													has_holder = no
												}
												
												NOT = { de_jure_liege_or_above = PREVPREVPREVPREV }
												ROOT = {
													completely_controls = PREV
												}
											}
										}
									}
									location = {
										duchy = {
											de_jure_liege = PREVPREVPREVPREV
										}
									}
								}
							}
						}
					}
				}

			}
			wealth = -300
			custom_tooltip = { text = form_new_kingdom_tooltip }
			chronicle = {
				entry = CHRONICLE_FOUNDED_NEW_KINGDOM_OR_EMPIRE
				portrait = [Root.GetID]
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
		}
	}

#	form_new_empire = { #Disabled because redundant and was causing bugs with centralization authroity
#		only_independent = yes
#		is_high_prio = yes
#		
#		potential = {
#			is_playable = yes
#			tier = KING
#			is_nomadic = no
#			has_dlc = "Charlemagne"
#			
#			holy_order = no
#			
#			NOT = { tier = EMPEROR }
#			OR = {
#				ai = no
#				AND = {
#					trait = proud
#					prestige = 40000
#				}
#				AND = {
#					trait = ambitious
#					prestige = 40000
#				}
#				prestige = 120000
#			}
#			
#			NOT = {
#				has_game_rule = {
#					name = dynamic_realms
#					value = off
#				}
#			}
#		}
#		allow = {
#			is_adult = yes
#			prisoner = no
#			NOT = { trait = incapable }
#			independent = yes
#			prestige = 8000
#			OR = {
#				realm_size = 180
#				custom_tooltip = {
#					text = form_new_empire_requirement_tooltip
#					hidden_tooltip = {
#						any_demesne_title = {
#							count = 3
#							tier = KING
#						}
#					}
#				}
#			}
#			wealth = 1000
#		}
#		effect = {
#			primary_title = {
#				create_title = {
#					tier = EMPEROR
#					landless = no
#					temporary = no
#					custom_created = yes
#					culture = ROOT
#					holder = ROOT
#					base_title = THIS
#					copy_title_laws = FROM
#				}
#
#				hidden_tooltip = {
#					ROOT = {
#						primary_title = {
#							holder_scope = {
#								any_title_under = {
#									limit = {
#										tier = KING
#										NOT = {
#											empire = { has_holder = yes }
#										}
#									}
#									de_jure_liege = PREVPREV
#								}
#								any_title_under = {
#									limit = {
#										tier = DUKE
#										location = {
#											kingdom = {
#												NOT = {
#													empire = { has_holder = yes }
#												}
#												
#												NOT = { de_jure_liege_or_above = PREVPREVPREVPREV }
#												ROOT = {
#													completely_controls = PREV
#												}
#											}
#										}
#									}
#									location = {
#										kingdom = {
#											de_jure_liege = PREVPREVPREVPREV
#										}
#									}
#								}
#							}
#						}
#					}
#				}
#			}
#			wealth = -1000
#			custom_tooltip = { text = form_new_empire_tooltip }
#			chronicle = {
#				entry = CHRONICLE_FOUNDED_NEW_KINGDOM_OR_EMPIRE
#				portrait = [Root.GetID]
#			}
#		}
#		revoke_allowed = {
#			always = no
#		}
#		ai_will_do = {
#			factor = 1
#		}
#	}

	
	host_confederation_congress = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			# Eligible to host congress
			independent = yes
			tier = king
			demesne_size = 1
			capital_scope = { empire = { has_holder = no } }
			NOT = { has_character_flag = flag_confederation_congress_host }
		}
		allow = {
			# Can afford the prestige cost
			prestige = 500
			# Prevent spamming
			custom_tooltip = {
				text = "5YEARCOOLDOWN"
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = flag_confederation_congress_failed }
						had_character_flag = { flag = flag_confederation_congress_failed days = 1825 }
					}
				}
			}
			# Not at war with anyone in the region
			NOT = {
				capital_scope = {
					empire = {
						any_independent_ruler = {
							de_jure_liege_or_above = PREV
							war_with = ROOT
						}
					}
				}
			}
			# Nobody else is already hosting a congress
			NOT = {
				any_independent_ruler = {
					capital_scope = { empire = { ROOT = { capital_scope = { empire = { title = PREVPREVPREV } } } } }
					has_character_flag = flag_confederation_congress_host
				}
			}
		}
		effect = {
			set_character_flag = flag_confederation_congress_host
			character_event = { id = diplomacy.1000 tooltip = "EVTTOOLTIPDIPLOMACY1000" }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { has_ambition = obj_become_emperor }
			}
			# Must have SOME possibility of success
			modifier = {
				factor = 0
				NOT = {
					capital_scope = {
						empire = {
							any_independent_ruler = {
								de_jure_liege_or_above = PREV
								opinion = { who = ROOT value = 0 }
							}
						}
					}
				}
			}
		}
	}
	apply_to_join_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			# Eligible to join empire
			independent = yes
			higher_tier_than = baron
			not = { tier = emperor }
			demesne_size = 1
			capital_scope = { empire = { has_holder = yes } }
		}
		allow = {
			# Not at war with emperor
			capital_scope = { empire = { holder_scope = { NOT = { any_current_enemy = { character = ROOT } } } } }
			# Can afford the piety hit
			OR = {
				AND = {
					NOT = { religion = colonial_separatist }
					NOT = { religion = neo_feudal }
					NOT = {
						AND = {
							religion = astrist
							capital_scope = { empire = { title = e_terran_confederation } }
						}
					}
					NOT = {
						AND = {
							religion = xenoterran
							capital_scope = { empire = { title = e_terran_confederation } }
						}
					}
				}
				piety = 100
				trait = pragmatic
			}
			# Can afford the prestige hit
			OR = {
				prestige = 100
				trait = humble
			}
			custom_tooltip = {
				text = "FIVEYEARCOOLDOWN"
				hidden_tooltip = {
					OR = {
						NOT = { has_character_flag = flag_empire_application }
						had_character_flag = { flag = flag_empire_application days = 1825 }
					}
				}
			}
		}
		effect = {
			clr_character_flag = flag_empire_application
			set_character_flag = flag_empire_application
			character_event = { id = diplomacy.100 tooltip = "EVTTOOLTIPDIPLOMACY100" }
		}
		ai_will_do = {
			factor = 1
			# Must have a positive reason to join
			modifier = {
				factor = 0
				
				# Personal
				capital_scope = {
					empire = {
						holder_scope = {
							NOT = { any_friend = { character = ROOT } }
							NOT = { any_lover = { character = ROOT } }
							NOT = { any_allied_character = { character = ROOT } }
						}
					}
				}
				
				# Ideology
				NOT = { religion = terran_federalist }
				NOT = { religion = terran_republican }
				NOT = { religion = terran_imperial }
				NOT = { religion = pilgrim }
				NOT = { religion = orthodox }
				
				# Pragmatic
				OR = {
					NOT = { has_ambition = obj_become_emperor }
					capital_scope = { empire = { holder_scope = { NOT = { relative_power = { who = ROOT power = 1 } } } } }
				}
				NOT = {
					OR = {
						AND = {
							is_primary_war_defender = yes
							any_current_enemy = { relative_power = { who = ROOT power = 2 } }
						}
						trait = proud
						trait = imbecile
						trait = lunatic
					}
				}
			}
			# Opinion of ruler
			modifier = {
				factor = 0
				capital_scope = { empire = { holder_scope = { NOT = { reverse_opinion = { who = ROOT value = 75 } } } } }
				NOT = {
					AND = {
						OR = {
							religion = terran_federalist
							religion = terran_republican
							religion = terran_imperial
							religion = pilgrim
							religion = orthodox
						}
						OR = {
							religion_authority = 0.25
							trait = radical
						}
					}
				}
				OR = {
					NOT = { has_ambition = obj_become_emperor }
					capital_scope = { empire = { holder_scope = { NOT = { relative_power = { who = ROOT power = 1 } } } } }
				}
				NOT = {
					OR = {
						AND = {
							is_primary_war_defender = yes
							any_current_enemy = { relative_power = { who = ROOT power = 2 } }
						}
						trait = proud
						trait = imbecile
						trait = lunatic
					}
				}
			}
			modifier = {
				factor = 0
				capital_scope = { empire = { holder_scope = { NOT = { reverse_opinion = { who = ROOT value = 50 } } } } }
				NOT = {
					AND = {
						OR = {
							religion = terran_federalist
							religion = terran_republican
							religion = terran_imperial
							religion = pilgrim
							religion = orthodox
						}
						religion_authority = 0.5
						NOT = { trait = pragmatic }
					}
				}
				OR = {
					NOT = { has_ambition = obj_become_emperor }
					capital_scope = { empire = { holder_scope = { NOT = { relative_power = { who = ROOT power = 1 } } } } }
				}
				NOT = {
					OR = {
						AND = {
							is_primary_war_defender = yes
							any_current_enemy = { relative_power = { who = ROOT power = 2 } }
						}
						trait = proud
						trait = brave
						trait = imbecile
						trait = slow
						trait = lunatic
					}
				}
			}
			modifier = {
				factor = 0
				capital_scope = { empire = { holder_scope = { NOT = { reverse_opinion = { who = ROOT value = 25 } } } } }
				NOT = {
					AND = {
						OR = {
							religion = terran_federalist
							religion = terran_republican
							religion = terran_imperial
							religion = pilgrim
							religion = orthodox
						}
						religion_authority = 0.75
					}
				}
				OR = {
					NOT = { has_ambition = obj_become_emperor }
					capital_scope = { empire = { holder_scope = { NOT = { relative_power = { who = ROOT power = 1 } } } } }
				}
				NOT = {
					OR = {
						AND = {
							is_primary_war_defender = yes
							any_current_enemy = { relative_power = { who = ROOT power = 2 } }
							trait = craven
						}
						trait = proud
						trait = imbecile
						trait = slow
						trait = lunatic
					}
				}
			}
			modifier = {
				factor = 0
				OR = {
					religion = colonial_separatist
					religion = neo_feudal
				}
				trait = radical
			}
		}
	}
	found_terran_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_terran_commonwealth }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_terran_commonwealth = { dejure_liege_title = { title = e_terran_confederation } } }
		}
		allow = {
			e_terran_confederation = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_terran_commonwealth = { de_jure_liege = e_terran_confederation }
			e_terran_confederation = {
				grant_title = ROOT
				copy_title_laws = k_terran_commonwealth
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_xingjie_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_xingjie }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_xingjie = { dejure_liege_title = { title = e_xingjie } } }
		}
		allow = {
			e_xingjie = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_xingjie = { de_jure_liege = e_xingjie }
			e_xingjie = {
				grant_title = ROOT
				copy_title_laws = k_xingjie
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_tierra_celeste_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_tierra_celeste }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_tierra_celeste = { dejure_liege_title = { title = e_tierra_celeste } } }
		}
		allow = {
			e_tierra_celeste = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_tierra_celeste = { de_jure_liege = e_tierra_celeste }
			e_tierra_celeste = {
				grant_title = ROOT
				copy_title_laws = k_tierra_celeste
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_al_samawat_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_al_samawat }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_al_samawat = { dejure_liege_title = { title = e_al_samawat } } }
		}
		allow = {
			e_al_samawat = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_al_samawat = { de_jure_liege = e_al_samawat }
			e_al_samawat = {
				grant_title = ROOT
				copy_title_laws = k_al_samawat
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_zenye_nyota_angani_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_zenye_nyota_angani }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_zenye_nyota_angani = { dejure_liege_title = { title = e_zenye_nyota_angani } } }
		}
		allow = {
			e_zenye_nyota_angani = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_zenye_nyota_angani = { de_jure_liege = e_zenye_nyota_angani }
			e_zenye_nyota_angani = {
				grant_title = ROOT
				copy_title_laws = k_zenye_nyota_angani
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_frontier_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_frontier }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_frontier = { dejure_liege_title = { title = e_frontier } } }
		}
		allow = {
			e_frontier = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_frontier = { de_jure_liege = e_frontier }
			e_frontier = {
				grant_title = ROOT
				copy_title_laws = k_frontier
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_centauri_reach_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_centauri_reach }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_centauri_reach = { dejure_liege_title = { title = e_centauri_reach } } }
		}
		allow = {
			e_centauri_reach = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_centauri_reach = { de_jure_liege = e_centauri_reach }
			e_centauri_reach = {
				grant_title = ROOT
				copy_title_laws = k_centauri_reach
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_helix_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_helix }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_helix = { dejure_liege_title = { title = e_helix } } }
		}
		allow = {
			e_helix = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_helix = { de_jure_liege = e_helix }
			e_helix = {
				grant_title = ROOT
				copy_title_laws = k_helix
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_xin_zizhiqu_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_xin_zizhiqu }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_xin_zizhiqu = { dejure_liege_title = { title = e_xin_zizhiqu } } }
		}
		allow = {
			e_xin_zizhiqu = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_xin_zizhiqu = { de_jure_liege = e_xin_zizhiqu }
			e_xin_zizhiqu = {
				grant_title = ROOT
				copy_title_laws = k_xin_zizhiqu
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_bianjiang_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_bianjiang }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_bianjiang = { dejure_liege_title = { title = e_bianjiang } } }
		}
		allow = {
			e_bianjiang = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_bianjiang = { de_jure_liege = e_bianjiang }
			e_bianjiang = {
				grant_title = ROOT
				copy_title_laws = k_bianjiang
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_orion_reach_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_orion_reach }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_orion_reach = { dejure_liege_title = { title = e_orion_reach } } }
		}
		allow = {
			e_orion_reach = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_orion_reach = { de_jure_liege = e_orion_reach }
			e_orion_reach = {
				grant_title = ROOT
				copy_title_laws = k_orion_reach
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_paraiso_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_paraiso }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_paraiso = { dejure_liege_title = { title = e_paraiso } } }
		}
		allow = {
			e_paraiso = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_paraiso = { de_jure_liege = e_paraiso }
			e_paraiso = {
				grant_title = ROOT
				copy_title_laws = k_paraiso
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_tarka_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_tarka }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_tarka = { dejure_liege_title = { title = e_tarka } } }
		}
		allow = {
			e_tarka = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_tarka = { de_jure_liege = e_tarka }
			e_tarka = {
				grant_title = ROOT
				copy_title_laws = k_tarka
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_avalon_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_avalon }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_avalon = { dejure_liege_title = { title = e_avalon } } }
		}
		allow = {
			e_avalon = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_avalon = { de_jure_liege = e_avalon }
			e_avalon = {
				grant_title = ROOT
				copy_title_laws = k_avalon
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_new_frontier_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_new_frontier }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_new_frontier = { dejure_liege_title = { title = e_new_frontier } } }
		}
		allow = {
			e_new_frontier = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_new_frontier = { de_jure_liege = e_new_frontier }
			e_new_frontier = {
				grant_title = ROOT
				copy_title_laws = k_new_frontier
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_jion_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_jion }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_jion = { dejure_liege_title = { title = e_jion } } }
		}
		allow = {
			e_jion = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_jion = { de_jure_liege = e_jion }
			e_jion = {
				grant_title = ROOT
				copy_title_laws = k_jion
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_strugatsky_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_strugatsky }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_strugatsky = { dejure_liege_title = { title = e_strugatsky } } }
		}
		allow = {
			e_strugatsky = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_strugatsky = { de_jure_liege = e_strugatsky }
			e_strugatsky = {
				grant_title = ROOT
				copy_title_laws = k_strugatsky
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_novyy_edem_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_novyy_edem }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_novyy_edem = { dejure_liege_title = { title = e_novyy_edem } } }
		}
		allow = {
			e_novyy_edem = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_novyy_edem = { de_jure_liege = e_novyy_edem }
			e_novyy_edem = {
				grant_title = ROOT
				copy_title_laws = k_novyy_edem
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_flame_nebula_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_flame_nebula }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_flame_nebula = { dejure_liege_title = { title = e_flame_nebula } } }
		}
		allow = {
			e_flame_nebula = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_flame_nebula = { de_jure_liege = e_flame_nebula }
			e_flame_nebula = {
				grant_title = ROOT
				copy_title_laws = k_flame_nebula
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_orion_nebula_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_orion_nebula }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_orion_nebula = { dejure_liege_title = { title = e_orion_nebula } } }
		}
		allow = {
			e_orion_nebula = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_orion_nebula = { de_jure_liege = e_orion_nebula }
			e_orion_nebula = {
				grant_title = ROOT
				copy_title_laws = k_orion_nebula
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_horsehead_nebula_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_horsehead_nebula }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_horsehead_nebula = { dejure_liege_title = { title = e_horsehead_nebula } } }
		}
		allow = {
			e_horsehead_nebula = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_horsehead_nebula = { de_jure_liege = e_horsehead_nebula }
			e_horsehead_nebula = {
				grant_title = ROOT
				copy_title_laws = k_horsehead_nebula
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_veil_nebula_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_veil_nebula }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_veil_nebula = { dejure_liege_title = { title = e_veil_nebula } } }
		}
		allow = {
			e_veil_nebula = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_veil_nebula = { de_jure_liege = e_veil_nebula }
			e_veil_nebula = {
				grant_title = ROOT
				copy_title_laws = k_veil_nebula
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	found_witchhead_nebula_empire = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			primary_title = { title = k_witchhead_nebula }
			independent = yes
			age = 16
			NOT = { trait = incapable }
			NOT = { k_witchhead_nebula = { dejure_liege_title = { title = e_witchhead_nebula } } }
		}
		allow = {
			e_witchhead_nebula = { has_holder = no }
			OR = {
				num_of_king_titles = 3
				realm_size = 150
			}
		}
		effect = {
			k_witchhead_nebula = { de_jure_liege = e_witchhead_nebula }
			e_witchhead_nebula = {
				grant_title = ROOT
				copy_title_laws = k_witchhead_nebula
			}
			hidden_tooltip = { character_event = { id = faction_names.100 } }
			prestige = 1000
		}
		ai_will_do = { factor = 1 }
	}
	petition_doge_for_tp = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			is_merchant_republic = no
			is_patrician = yes
			liege = { is_merchant_republic = yes }
			NOT = { has_character_flag = petition_doge_for_tp_taken }
			OR = {
				liege = {
					any_vassal = {
						is_patrician = yes
						num_of_trade_post_diff = {
							character = ROOT
							value = 10
						}
					}
				}
				AND = {
					NOT = { num_of_trade_posts = 1 }
					liege = {
						any_vassal = {
							is_patrician = yes
							num_of_trade_posts = 10
						}
					}
				}
			}
		}
		allow = {
			liege = {
				opinion = {
					who = ROOT
					value = 25
				}
			}
		}
		effect = {
			set_character_flag = petition_doge_for_tp_taken
			liege = {
				letter_event = { id = REP.500 days = 5 tooltip = EVTTOOLTIP_REP_500 }
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	usurp_tp = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = {
			is_merchant_republic = yes
			is_patrician = yes
			NOT = { has_character_flag = usurp_tp_taken }
			OR = {
				any_vassal = {
					is_patrician = yes
					num_of_trade_post_diff = {
						character = ROOT
						value = 10
					}
				}
				AND = {
					NOT = { num_of_trade_posts = 1 }
					any_vassal = {
						is_patrician = yes
						num_of_trade_posts = 10
					}
				}
			}
		}
		allow = {
			is_merchant_republic = yes
		}
		effect = {
			set_character_flag = usurp_tp_taken
			if = {
				limit = {
					num_of_trade_posts = 1
					any_vassal = {
						is_patrician = yes
						num_of_trade_post_diff = {
							character = ROOT
							value = 10
						}
					}
				}
				random_vassal = {
					limit = {
						is_patrician = yes
						num_of_trade_post_diff = {
							character = ROOT
							value = 10
						}
					}
					set_character_flag = target_patrician_doge
					letter_event = { id = REP.510 days = 5 tooltip = EVTTOOLTIP_REP_510 }
				}
			}
			if = {
				limit = {
					NOT = { num_of_trade_posts = 1 }
					any_vassal = {
						is_patrician = yes
						num_of_trade_posts = 10
					}
				}
				random_vassal = {
					limit = {
						is_patrician = yes
						num_of_trade_posts = 10
					}
					set_character_flag = target_patrician_doge
					letter_event = { id = REP.510 days = 5 tooltip = EVTTOOLTIP_REP_510 }
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
		
	buy_indulgence_for_sins = {
		only_playable = yes
		ai_check_interval = 40 
 potential = { ai = no
			has_regent = no
			is_heretic = no
			OR = {
				religion = catholic
				AND = {
					religion = chalcedonian
					rightful_religious_head_scope = { trait = latin_rites }
				}
			}
			demesne_size = 1
			NOT = { trait = excommunicated }
			rightful_religious_head_scope = {
				is_alive = yes
				NOT = { character = ROOT }
			}
		}
		allow = {
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			treasury = 50
			custom_tooltip = {
				text = RECENT_INDULGENCE
				hidden_tooltip = {
					NOT = { has_character_modifier = indulgence_timer }
				}
			}
		}
		effect = {
			treasury = -50
			piety = 25
			if = {
				limit = { any_vassal = { leads_faction = faction_tradition } }
				custom_tooltip = { text = TRADITIONFACTIONMOODPLUS }
				hidden_tooltip = {
					random_vassal = { limit = { leads_faction = faction_tradition } set_variable = { which = "faction_mood_increase" value = 1 } }
					character_event = { id = PlusFaction.200 days = 1 } #recalculate faction moods
				}
			}
			rightful_religious_head_scope = {
				opinion = {
					who = ROOT
					modifier = bought_indulgences
					years = 3
				}
			}
			hidden_tooltip = {
				if = {
					limit = { ai = no }
					add_character_modifier = {
						name = indulgence_timer
						duration = 1095
						hidden = yes
					}
				}
				if = {
					limit = { ai = yes }
					add_character_modifier = {
						name = indulgence_timer
						duration = 3650
						hidden = yes
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
				always = yes
			}
			modifier = {
				factor = 0
				piety = 0
				OR = {
					trait = pragmatic
					trait = cruel
					trait = greedy
				}
			}
			modifier = {
				factor = 0
				piety = 100
			}
			modifier = {
				factor = 0
				piety = 0
				NOT = { treasury = 200 }
			}
		}
	}

	issue_declaration_of_repentance = {
		only_playable = yes
		ai_check_interval = 40 
 potential = { ai = no
			is_playable = yes
			OR = {
				religion = catholic
				religion = chalcedonian
			}
			has_regent = no
			demesne_size = 1
			OR = {
				NOT = { has_character_flag = ask_for_repentance }
				had_character_flag = {
					flag = ask_for_repentance
					days = 1825
				}
			}
			rightful_religious_head_scope = {
				ROOT = {
					excommunicated_for = PREV
				}
			}
		}
		allow = {
			scaled_wealth = 2.0
			is_heretic = no
		}
		effect = {
			set_character_flag = ask_for_repentance
			rightful_religious_head_scope = {
				character_event = { id = 39252 days = 5 random = 12 tooltip = "repentance_ask" }
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	demand_liege_title = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 40 
 potential = { ai = no
			ai = no
			is_playable = yes
			NOT = { has_character_flag = requested_de_jure_title }
			liege = {
				NOT = { character = ROOT }
				primary_title = { higher_tier_than = DUKE }
				any_demesne_title = {
					tier = DUKE
					has_de_jure_pretension = ROOT
					can_be_given_away = yes
					NOT = {
						holder_scope = {
							any_demesne_province = {
								duchy = { title = PREVPREVPREV }
							}
						}
					}
				}
			}
			has_regent = no
			tier = count
		}
		allow = {
			liege = {
				opinion = {
					who = ROOT
					value = 25
				}
			}
		}
		effect = {
			set_character_flag = requested_de_jure_title
			liege = {
				set_character_flag = wants_duchy_title
				letter_event = { id = 63041 days = 4 tooltip = "EVTTOOLTIP63041" } # "vassal_request_events.txt"
			}
		}
		ai_will_do = {
			factor = 0 # The AI is limited to the similar event 63040
		}
	}
	
	petition_doge_for_tp = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 40 
 potential = { ai = no
			is_playable = yes
			is_merchant_republic = no
			is_patrician = yes
			liege = { is_merchant_republic = yes }
			NOT = { has_character_flag = petition_doge_for_tp_taken }
			OR = {
				liege = {
					any_vassal = {
						is_patrician = yes
						num_of_trade_post_diff = {
							character = ROOT
							value = 10
						}
					}
				}
				AND = {
					NOT = { num_of_trade_posts = 1 }
					liege = {
						any_vassal = {
							is_patrician = yes
							num_of_trade_posts = 10
						}
					}
				}
			}
		}
		allow = {
			liege = {
				opinion = {
					who = ROOT
					value = 25
				}
			}
		}
		effect = {
			set_character_flag = petition_doge_for_tp_taken
			liege = {
				letter_event = { id = REP.500 days = 5 tooltip = EVTTOOLTIP_REP_500 }
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	usurp_tp = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 40 
 potential = { ai = no
			is_playable = yes
			is_merchant_republic = yes
			is_patrician = yes
			NOT = { has_character_flag = usurp_tp_taken }
			OR = {
				any_vassal = {
					is_patrician = yes
					num_of_trade_post_diff = {
						character = ROOT
						value = 10
					}
				}
				AND = {
					NOT = { num_of_trade_posts = 1 }
					any_vassal = {
						is_patrician = yes
						num_of_trade_posts = 10
					}
				}
			}
		}
		allow = {
			is_merchant_republic = yes
		}
		effect = {
			set_character_flag = usurp_tp_taken
			if = {
				limit = {
					num_of_trade_posts = 1
					any_vassal = {
						is_patrician = yes
						num_of_trade_post_diff = {
							character = ROOT
							value = 10
						}
					}
				}
				random_vassal = {
					limit = {
						is_patrician = yes
						num_of_trade_post_diff = {
							character = ROOT
							value = 10
						}
					}
					set_character_flag = target_patrician_doge
					letter_event = { id = REP.510 days = 5 tooltip = EVTTOOLTIP_REP_510 }
				}
			}
			if = {
				limit = {
					NOT = { num_of_trade_posts = 1 }
					any_vassal = {
						is_patrician = yes
						num_of_trade_posts = 10
					}
				}
				random_vassal = {
					limit = {
						is_patrician = yes
						num_of_trade_posts = 10
					}
					set_character_flag = target_patrician_doge
					letter_event = { id = REP.510 days = 5 tooltip = EVTTOOLTIP_REP_510 }
				}
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	# Hold Wargames - for nomads
	hold_nomad_wargames = {
		only_playable = yes
		
		ai_check_interval = 40 
 potential = { ai = no
			is_playable = yes
			is_nomadic = yes
			NOT = { has_character_modifier = holding_nomad_wargames }
			NOT = { has_character_modifier = held_nomad_wargames }
		}
		allow = {
			is_adult = yes
			prisoner = no
			NOT = { trait = incapable }
			NOT = { is_inaccessible_trigger = yes }
			war = no
			any_demesne_title = {
				NOT = { higher_tier_than = count }
				is_occupied = no
			}
			wealth = 20
			prestige = 100
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_modifier = do_not_disturb } }
			}
		}
		effect = {
			wealth = -30
			add_character_modifier = {
				name = holding_nomad_wargames
				duration = -1
			}
			set_character_flag = recent_minor_decision
			hidden_tooltip = { character_event = { id = HL.7000 } }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 0
				NOT = {
					wealth = 200
				}
			}
			modifier = {
				factor = 2
				current_heir = {
					dynasty = ROOT
					combat_rating = 8
				}
			}
			modifier = {
				factor = 0.5
				NOT = { martial = 10 }
			}	
			modifier = {
				factor = 0
				has_character_flag = recent_minor_decision
				NOT = {
					had_character_flag = {
						flag = recent_minor_decision
						days = 730
					}
				}
			}	
		}
	}
	
	convert_to_feudalism_indep = {
		is_high_prio = yes
		only_rulers = yes
		only_independent = yes
		ai_check_interval = 40 
 potential = { ai = no
			is_playable = yes
			is_tribal = yes
			is_ruler = yes
			independent = yes
		}
		allow = {
			war = no
			OR = {
				primary_title = { has_law = tribal_organization_4 }
				AND = {
					primary_title = { has_law = tribal_organization_2 }
					TECH_LEGALISM = 3
					TECH_NOBLE_CUSTOMS = 3
					TECH_MAJESTY = 3
				}
			}
			capital_scope = {
				TECH_NOBLE_CUSTOMS = 1
				OR = {
					custom_tooltip = {
						text = TT_NOT_UNREFORMED_PAGAN
						hidden_tooltip = {
							OR = {
								ROOT = { NOT = { religion_group = pagan_group } }
								ROOT = { is_reformed_religion = yes }
							}
						}
					}
					TECH_NOBLE_CUSTOMS = 3
				}
			}
			capital_holding = {
				OR = {
					holding_type = castle
					AND = {
						holding_type = tribal
						has_building = tb_hillfort_4
					}
				}
			}
		}
		effect = {
			#notify of holdings that will not upgrade
			any_demesne_province = {
				limit = {
					culture = ROOT
					any_province_holding = {
						holding_type = tribal
						NOT = { has_building = tb_hillfort_4 }
					}
				}
				random_province_holding = {
					if = {
						limit = {
							holding_type = tribal
						}
						custom_tooltip = { text = TRIBAL_NOT_UPGRADE }
					}
				}
			}
			#notify of holdings that will cause an issue
			any_demesne_province = {
				limit = {
					NOT = { culture = ROOT }
					any_province_holding = {
						holding_type = tribal
						NOT = { has_building = tb_hillfort_4 }
					}
				}
				random_province_holding = {
					if = {
						limit = {
							holding_type = tribal
						}
						custom_tooltip = { text = TRIBAL_PROVINCE_NOT_CULTURE_WARNING }
					}
				}
			}
			#notify of vassals that will cause an issue
			any_vassal = {
				limit = {
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
				}
				custom_tooltip = { text = TRIBAL_VASSAL_NOT_CULTURE_WARNING }
			}
			#upgrade tribal holdings which have full hillforts
			any_demesne_province = {
				limit = {
					any_province_holding = {
						holding_type = tribal
						has_building = tb_hillfort_4
					}
				}
				any_province_holding = {
					limit = {
						holding_type = tribal
						has_building = tb_hillfort_4
					}
					set_title_flag = refill_levy
					convert_to = CASTLE
					hidden_tooltip = {
						refill_holding_levy = yes
					}
				}
				hidden_tooltip = {
					add_province_modifier = {
						name = new_buildings_timer
						duration = 36500
						hidden = yes
					}
				}
			}
			if = {
				limit = {
					NOT = { religion_group = muslim }
					NOT = { religion = bogomilist }
				}
				if = {
					limit = { ai = no }
					chronicle = {
						entry = CHRONICLE_ADOPTED_FEUDALISM
						picture = GFX_evt_castle_construction
					}
				}
				set_government_type = feudal_government
			}
			if = {
				limit = { religion_group = muslim }
				if = {
					limit = { ai = no }
					chronicle = {
						entry = CHRONICLE_ADOPTED_IQTA
						picture = GFX_evt_castle_construction
					}
				}
				set_government_type = muslim_government
			}
			if = {
				limit = { religion = bogomilist }
				if = {
					limit = { ai = no }
					chronicle = {
						entry = CHRONICLE_ADOPTED_BOGOMILIST
						picture = GFX_evt_castle_construction
					}
				}
				set_government_type = bogomilist_government
			}				
			if = {
				limit = { higher_tier_than = king }
				primary_title = {
					add_law = feudal_administration
				}
			}
			primary_title = {
				hidden_tooltip = { revoke_law = tribal_organization_4 }
			}
			hidden_tooltip = {
				any_demesne_title = {
					if = {
						limit = { is_crown_law_title = yes }
						set_title_flag = do_not_destroy
					}
				}
				character_event = { id = Plus.352 days = 3 } #refill the levies
			}
		}
		ai_will_do = {
			factor = 1 # On average ca 1 year before taken
			modifier = {
				factor = 0
				any_demesne_title = {
					tier = baron
					holding_type = tribal
					NOT = { has_building = tb_hillfort_4 }
					location = { NOT = { culture = ROOT } }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.75 }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					count = 2
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.5 }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					count = 3
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.25 }
				}
			}
		}
	}
	
	convert_to_feudalism_vassal = {
		is_high_prio = yes
		only_rulers = yes
		ai_check_interval = 40 
 potential = { ai = no
			is_tribal = yes
			independent = no
			is_ruler = yes
			any_demesne_title = {
				tier = baron
				holding_type = tribal
			}
		}
		allow = {
			war = no
			liege = {
				is_tribal = no
				is_nomadic = no
			}
			capital_holding = {
				OR = {
					holding_type = castle
					AND = {
						holding_type = tribal
						has_building = tb_hillfort_4
					}
				}
			}
		}
		effect = {
			#notify of holdings that will not upgrade
			any_demesne_province = {
				limit = {
					culture = ROOT
					any_province_holding = {
						holding_type = tribal
						NOT = { has_building = tb_hillfort_4 }
					}
				}
				random_province_holding = {
					if = {
						limit = {
							holding_type = tribal
						}
						custom_tooltip = { text = TRIBAL_NOT_UPGRADE }
					}
				}
			}
			#notify of holdings that will cause an issue
			any_demesne_province = {
				limit = {
					NOT = { culture = ROOT }
					any_province_holding = {
						holding_type = tribal
						NOT = { has_building = tb_hillfort_4 }
					}
				}
				random_province_holding = {
					if = {
						limit = {
							holding_type = tribal
						}
						custom_tooltip = { text = TRIBAL_PROVINCE_NOT_CULTURE_WARNING }
					}
				}
			}
			#notify of vassals that will cause an issue
			any_vassal = {
				limit = {
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
				}
				custom_tooltip = { text = TRIBAL_VASSAL_NOT_CULTURE_WARNING }
			}			
		
			#upgrade tribal holdings which have full hillforts
			any_demesne_province = {
				limit = {
					any_province_holding = {
						holding_type = tribal
						has_building = tb_hillfort_4
					}
				}
				any_province_holding = {
					limit = {
						holding_type = tribal
						has_building = tb_hillfort_4
					}
					set_title_flag = refill_levy
					convert_to = CASTLE
					hidden_tooltip = {
						refill_holding_levy = yes
					}
				}
				hidden_tooltip = {
					add_province_modifier = {
						name = new_buildings_timer
						duration = 36500
						hidden = yes
					}
				}
			}
			if = {
				limit = {
					NOT = { religion_group = muslim }
					NOT = { religion = bogomilist }
				}
				if = {
					limit = { ai = no }
					chronicle = {
						entry = CHRONICLE_ADOPTED_FEUDALISM
						picture = GFX_evt_castle_construction
					}
				}
				set_government_type = feudal_government
			}
			if = {
				limit = { religion_group = muslim }
				if = {
					limit = { ai = no }
					chronicle = {
						entry = CHRONICLE_ADOPTED_IQTA
						picture = GFX_evt_castle_construction
					}
				}
				set_government_type = muslim_government
			}
			if = {
				limit = { religion = bogomilist }
				if = {
					limit = { ai = no }
					chronicle = {
						entry = CHRONICLE_ADOPTED_BOGOMILIST
						picture = GFX_evt_castle_construction
					}
				}
				set_government_type = bogomilist_government
			}
			primary_title = {
				hidden_tooltip = {
					revoke_law = tribal_organization_0
					revoke_law = tribal_organization_1
					revoke_law = tribal_organization_2
					revoke_law = tribal_organization_3
					revoke_law = tribal_organization_4
				}
			}
			hidden_tooltip = {
				any_demesne_title = {
					if = {
						limit = { is_crown_law_title = yes }
						set_title_flag = do_not_destroy
					}
				}
				character_event = { id = Plus.352 days = 3 } #refill the levies
				liege = {
					character_event = { id = 55100 } # Notify Liege
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
				always = yes
			}
			modifier = {
				factor = 0
				any_demesne_title = {
					tier = baron
					holding_type = tribal
					NOT = { has_building = tb_hillfort_4 }
					location = { NOT = { culture = ROOT } }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.75 }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					count = 2
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.5 }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					count = 3
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.25 }
				}
			}
			modifier = {
				factor = 0.001
				liege = {
					OR = {
						NOT = { religion_group = ROOT }
						AND = {
							religion_group = pagan_group
							NOT = { religion = ROOT }
						}
					}
				}
			}
			modifier = {
				factor = 0.01
				liege = {
					NOT = { culture_group = ROOT }
				}
			}
			
			modifier = {
				factor = 0.01
				liege = {
					religion_group = ROOT
					NOT = { religion_group = pagan_group }
					NOT = { religion = ROOT }
				}
			}
			modifier = {
				factor = 0.1
				liege = {
					culture_group = ROOT
					NOT = { culture = ROOT }
				}
			}
			modifier = {
				factor = 0.5
				liege = { is_republic = yes }
			}
			modifier = {
				factor = 1.5
				liege = { is_feudal = yes }
			}
			modifier = {
				factor = 5
				OR = {
					trait = misguided_warrior
					trait = tough_soldier
					trait = skilled_tactician
					trait = brilliant_strategist
				}
			}
			modifier = {
				factor = 0.5
				liege = { is_republic = yes }
				OR = {
					is_patrician = yes
					leads_faction = faction_prosperity
					in_faction = faction_prosperity
				}
			}
		}
	}

	convert_to_republic_indep = {
		is_high_prio = yes
		only_rulers = yes
		only_independent = yes
		ai_check_interval = 40 
 potential = { ai = no
			is_playable = yes
			is_tribal = yes
			is_ruler = yes
			independent = yes
			OR = {
				ai = yes
				has_dlc = "The Republic"
			}
		}
		allow = {
			war = no
			is_female = no
			higher_tier_than = COUNT
			primary_title = { has_law = tribal_organization_4 }
			capital_scope = {
				port = yes
				TECH_TRADE_PRACTICES = 1
				OR = {
					custom_tooltip = {
						text = TT_NOT_UNREFORMED_PAGAN
						hidden_tooltip = {
							OR = {
								ROOT = { NOT = { religion_group = pagan_group } }
								ROOT = { is_reformed_religion = yes }
							}
						}
					}
					TECH_TRADE_PRACTICES = 3
				}
			}
			capital_holding = {
				OR = {
					holding_type = city
					AND = {
						holding_type = tribal
						has_building = tb_market_town_4
					}
				}
			}
		}
		effect = {
			#notify of holdings that will not upgrade
			any_demesne_province = {
				limit = {
					culture = ROOT
					any_province_holding = {
						holding_type = tribal
						NOT = { has_building = tb_market_town_4 }
					}
				}
				random_province_holding = {
					if = {
						limit = {
							holding_type = tribal
						}
						custom_tooltip = { text = TRIBAL_NOT_UPGRADE }
					}
				}
			}
			#notify of holdings that will cause an issue
			any_demesne_province = {
				limit = {
					NOT = { culture = ROOT }
					any_province_holding = {
						holding_type = tribal
						NOT = { has_building = tb_market_town_4 }
					}
				}
				random_province_holding = {
					if = {
						limit = {
							holding_type = tribal
						}
						custom_tooltip = { text = TRIBAL_PROVINCE_NOT_CULTURE_WARNING }
					}
				}
			}
			#notify of vassals that will cause an issue
			any_vassal = {
				limit = {
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
				}
				custom_tooltip = { text = TRIBAL_VASSAL_NOT_CULTURE_WARNING }
			}
			
			hidden_tooltip = {
				create_family_palace = yes				
				set_government_type = merchant_republic_government
				
				if = {
					limit = {
						NOT = {
							num_of_government_vassals = {
								government = merchant_republic_government
								value = 1
							}
						}
					}
					
					any_unique_dynasty_vassal = { # gives random vassals a family palace
						count = 4
						limit = {
							is_female = no
							OR = {
								is_republic = yes
								is_tribal = yes
							}
							is_patrician = no
							prisoner = no
							NOT = { trait = incapable }
							is_adult = yes
							NOT = { dynasty = none }
						}	
						if = {
							limit = { is_tribal = yes }		
							hidden_tooltip = {
								capital_holding = {
									if = {
										limit = { holding_type = tribal }
										set_title_flag = refill_levy
										convert_to = CITY
										hidden_tooltip = {
											refill_holding_levy = yes
											location = {
												add_province_modifier = {
													name = new_buildings_timer
													duration = 36500
													hidden = yes
												}
											}
										}
									}
								}
								any_demesne_province = {
									limit = {
										any_province_holding = {
											holding_type = tribal
											has_building = tb_market_town_4
										}
									}
									any_province_holding = {
										limit = {
											holding_type = tribal
											has_building = tb_market_town_4
										}
										set_title_flag = refill_levy
										convert_to = CITY
										hidden_tooltip = {
											refill_holding_levy = yes
										}
									}
									hidden_tooltip = {
										add_province_modifier = {
											name = new_buildings_timer
											duration = 36500
											hidden = yes
										}
									}
								}
							}
						}
						create_family_palace = yes
					}
				}
			}
				
			#upgrade tribal holdings which have full market towns
			any_demesne_province = {
				limit = {
					any_province_holding = {
						holding_type = tribal
						has_building = tb_market_town_4
					}
				}
				any_province_holding = {
					limit = {
						holding_type = tribal
						has_building = tb_market_town_4
					}
					set_title_flag = refill_levy
					convert_to = CITY
					hidden_tooltip = {
						refill_holding_levy = yes
					}
				}
				hidden_tooltip = {
					add_province_modifier = {
						name = new_buildings_timer
						duration = 36500
						hidden = yes
					}
				}
			}
			if = {
				limit = { ai = no }
				chronicle = {
					entry = CHRONICLE_FOUNDED_MERCHANT_REPUBLIC
					picture = GFX_evt_busy_trading_dock_republic
				}
			}
			
			set_government_type = merchant_republic_government
			
			hidden_tooltip = {
				any_demesne_title = {
					if = {
						limit = { is_crown_law_title = yes }
						set_title_flag = do_not_destroy
					}
				}
				character_event = { id = Plus.352 days = 3 } #refill the levies
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
				always = yes
			}
			modifier = {
				factor = 0
				any_demesne_title = {
					tier = baron
					holding_type = tribal
					NOT = { has_building = tb_market_town_4 }
					location = { NOT = { culture = ROOT } }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.75 }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					count = 2
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.5 }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					count = 3
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.25 }
				}
			}
			modifier = {
				factor = 2.0
				stewardship = 10
			}
			modifier = {
				factor = 4.0
				capital_holding = { holding_type = city }
			}
		}
	}
	
	convert_to_republic_vassal = {
		is_high_prio = yes
		only_rulers = yes
		ai_check_interval = 40 
 potential = { ai = no
			is_tribal = yes
			independent = no
			is_ruler = yes
			any_demesne_title = {
				tier = baron
				holding_type = tribal
			}
			OR = {
				ai = yes
				has_dlc = "The Republic"
			}
		}
		allow = {
			war = no
			is_female = no
			higher_tier_than = COUNT
			capital_scope = { port = yes }
			liege = {
				OR = {
					is_feudal = yes
					is_theocracy = yes
				}
			}
			capital_holding = {
				OR = {
					holding_type = city
					AND = {
						holding_type = tribal
						has_building = tb_market_town_4
					}
				}
			}
		}
		effect = {
			#notify of holdings that will not upgrade
			any_demesne_province = {
				limit = {
					culture = ROOT
					any_province_holding = {
						holding_type = tribal
						NOT = { has_building = tb_market_town_4 }
					}
				}
				random_province_holding = {
					if = {
						limit = {
							holding_type = tribal
						}
						custom_tooltip = { text = TRIBAL_NOT_UPGRADE }
					}
				}
			}
			#notify of holdings that will cause an issue
			any_demesne_province = {
				limit = {
					NOT = { culture = ROOT }
					any_province_holding = {
						holding_type = tribal
						NOT = { has_building = tb_market_town_4 }
					}
				}
				random_province_holding = {
					if = {
						limit = {
							holding_type = tribal
						}
						custom_tooltip = { text = TRIBAL_PROVINCE_NOT_CULTURE_WARNING }
					}
				}
			}
			#notify of vassals that will cause an issue
			any_vassal = {
				limit = {
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
				}
				custom_tooltip = { text = TRIBAL_VASSAL_NOT_CULTURE_WARNING }
			}
			
			hidden_tooltip = {
				create_family_palace = yes
				if = {
					limit = {
						NOT = {
							num_of_government_vassals = {
								government = merchant_republic_government
								value = 1
							}
						}
					}
					any_unique_dynasty_vassal = { # gives random vassals a family palace
						count = 4
						limit = {
							is_female = no
							OR = {
								is_republic = yes
								is_tribal = yes
							}
							is_patrician = no
							prisoner = no
							NOT = { trait = incapable }
							is_adult = yes
							NOT = { dynasty = none }
						}	
						if = {
							limit = { is_tribal = yes }		
							hidden_tooltip = {
								capital_holding = {
									if = {
										limit = { holding_type = tribal }
										set_title_flag = refill_levy
										convert_to = CITY
										hidden_tooltip = {
											refill_holding_levy = yes
											location = {
												add_province_modifier = {
													name = new_buildings_timer
													duration = 36500
													hidden = yes
												}
											}
										}
									}
								}
								any_demesne_province = {
									limit = {
										any_province_holding = {
											holding_type = tribal
											has_building = tb_market_town_4
										}
									}
									any_province_holding = {
										limit = {
											holding_type = tribal
											has_building = tb_market_town_4
										}
										set_title_flag = refill_levy
										convert_to = CITY
										hidden_tooltip = {
											refill_holding_levy = yes
										}
									}
									hidden_tooltip = {
										add_province_modifier = {
											name = new_buildings_timer
											duration = 36500
											hidden = yes
										}
									}
								}
							}
						}
						create_family_palace = yes
					}
				}
			}
			
			#upgrade tribal holdings which have full market towns
			any_demesne_province = {
				limit = {
					any_province_holding = {
						holding_type = tribal
						has_building = tb_market_town_4
					}
				}
				any_province_holding = {
					limit = {
						holding_type = tribal
						has_building = tb_market_town_4
					}
					set_title_flag = refill_levy
					convert_to = CITY
					hidden_tooltip = {
						refill_holding_levy = yes
					}
				}
				hidden_tooltip = {
					add_province_modifier = {
						name = new_buildings_timer
						duration = 36500
						hidden = yes
					}
				}
			}
			if = {
				limit = { ai = no }
				chronicle = {
					entry = CHRONICLE_FOUNDED_MERCHANT_REPUBLIC
					picture = GFX_evt_busy_trading_dock_republic
				}
			}
			
			set_government_type = merchant_republic_government
			
			hidden_tooltip = {
				any_demesne_title = {
					if = {
						limit = { is_crown_law_title = yes }
						set_title_flag = do_not_destroy
					}
				}
				liege = {
					character_event = { id = 55100 } # Notify Liege
				}
				character_event = { id = Plus.352 days = 3 } #refill the levies
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
				always = yes
			}
			modifier = {
				factor = 0
				any_demesne_title = {
					tier = baron
					holding_type = tribal
					NOT = { has_building = tb_market_town_4 }
					location = { NOT = { culture = ROOT } }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.75 }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					count = 2
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.5 }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					count = 3
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.25 }
				}
			}
			modifier = {
				factor = 0.001
				liege = {
					OR = {
						NOT = { religion_group = ROOT }
						AND = {
							religion_group = pagan_group
							NOT = { religion = ROOT }
						}
					}
				}
			}
			modifier = {
				factor = 0.01
				liege = {
					NOT = { culture_group = ROOT }
				}
			}
			
			modifier = {
				factor = 0.01
				liege = {
					religion_group = ROOT
					NOT = { religion_group = pagan_group }
					NOT = { religion = ROOT }
				}
			}
			modifier = {
				factor = 0.1
				liege = {
					culture_group = ROOT
					NOT = { culture = ROOT }
				}
			}
			modifier = {
				factor = 0
				NOT = {
					independent = yes
					liege = { is_republic = yes }
					is_patrician = yes
					leads_faction = faction_prosperity
					in_faction = faction_prosperity
					trait = fortune_builder
					trait = midas_touched
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					liege = { is_feudal = yes }
					liege = { is_theocracy = yes }
					independent = yes
				}
				NOT = {
					trait = indulgent_wastrel
					trait = thrifty_clerk
					trait = fortune_builder
					trait = midas_touched
				}
			}
			modifier = {
				factor = 0.5
				liege = { is_republic = yes }
				NOT = {
					is_patrician = yes
					trait = indulgent_wastrel
					trait = thrifty_clerk
					trait = fortune_builder
					trait = midas_touched
				}
			}
			modifier = {
				factor = 1.5
				trait = thrifty_clerk
			}
			modifier = {
				factor = 2.5
				trait = fortune_builder
			}
			modifier = {
				factor = 5
				trait = midas_touched
			}
			modifier = {
				factor = 10
				OR = {
					is_patrician = yes
					is_republic = yes
				}
			}
			#feudal liege has less than 5 feudal vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					NOT = {
						any_vassal = { 
							is_feudal = yes
							higher_tier_than = BARON
							count = 5
						}
					}
				}
			}
			#feudal liege has a republic vassal and less than 10 feudal vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					any_vassal = {
						is_republic = yes
						higher_tier_than = BARON
					}
					NOT = {
						any_vassal = {
							is_republic = yes
							higher_tier_than = BARON
							count = 2
						}
					}
					NOT = {
						any_vassal = { 
							is_feudal = yes
							higher_tier_than = BARON
							count = 10
						}
					}
				}
			}
			#feudal liege has two republic vassals and less than 20 feudal vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					any_vassal = {
						is_republic = yes
						higher_tier_than = BARON
						count = 2
					}
					NOT = {
						any_vassal = {
							is_republic = yes
							higher_tier_than = BARON
							count = 3
						}
					}
					NOT = {
						any_vassal = { 
							is_feudal = yes
							higher_tier_than = BARON
							count = 20
						}
					}
				}
			}
			#feudal liege has three republic vassals and less than 30 feudal vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					any_vassal = {
						is_republic = yes
						higher_tier_than = BARON
						count = 3
					}
					NOT = {
						any_vassal = {
							is_republic = yes
							higher_tier_than = BARON
							count = 4
						}
					}
					NOT = {
						any_vassal = {
							is_feudal = yes
							higher_tier_than = BARON
							count = 30
						}
					}
				}
			}
			#feudal liege has four republic vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					any_vassal = {
						is_republic = yes
						higher_tier_than = BARON
						count = 4
					}
				}
			}
		}
	}
	
	convert_to_city_vassal = {
		is_high_prio = yes
		only_rulers = yes
		ai_check_interval = 40 
 potential = { ai = no
			is_tribal = yes
			independent = no
			ai = yes
			is_ruler = yes
			any_demesne_title = {
				tier = baron
				holding_type = tribal
			}
		}
		allow = {
			war = no
			is_female = no
			OR = {
				lower_tier_than = DUKE
				NOT = { capital_scope = { port = yes } }
				liege = { is_republic = yes }
			}
			liege = {
				OR = {
					is_feudal = yes
					is_republic = yes
					is_theocracy = yes
				}
			}
			capital_holding = {
				OR = {
					holding_type = city
					AND = {
						holding_type = tribal
						has_building = tb_market_town_4
					}
					AND = {
						holding_type = tribal
						has_building = tb_hillfort_4
					}
				}
			}
		}
		effect = {
			#upgrade tribal holdings which have full market towns
			any_demesne_province = {
				limit = {
					any_province_holding = {
						holding_type = tribal
						OR = {
							has_building = tb_market_town_4
							has_building = tb_hillfort_4
						}
					}
				}
				any_province_holding = {
					limit = {
						holding_type = tribal
						OR = {
							has_building = tb_market_town_4
							has_building = tb_hillfort_4
						}
					}
					set_title_flag = refill_levy
					convert_to = CITY
					hidden_tooltip = {
						refill_holding_levy = yes
					}
				}
				hidden_tooltip = {
					add_province_modifier = {
						name = new_buildings_timer
						duration = 36500
						hidden = yes
					}
				}
			}
	
			set_government_type = republic_government
			
			hidden_tooltip = {
				any_demesne_title = {
					if = {
						limit = { is_crown_law_title = yes }
						set_title_flag = do_not_destroy
					}
				}
				liege = {
					character_event = { id = 55100 } # Notify Liege
				}
				character_event = { id = Plus.352 days = 3 } #refill the levies
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
				always = yes
			}
			modifier = {
				factor = 0
				any_demesne_title = {
					tier = baron
					holding_type = tribal
					NOT = { has_building = tb_market_town_4 }
					NOT = { has_building = tb_hillfort_4 }
					location = { NOT = { culture = ROOT } }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.75 }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					count = 2
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.5 }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					count = 3
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { culture = ROOT }
					relative_power = { who = ROOT power = 0.25 }
				}
			}
			modifier = {
				factor = 0.001
				liege = {
					OR = {
						NOT = { religion_group = ROOT }
						AND = {
							religion_group = pagan_group
							NOT = { religion = ROOT }
						}
					}
				}
			}
			modifier = {
				factor = 0.01
				liege = {
					NOT = { culture_group = ROOT }
				}
			}
			
			modifier = {
				factor = 0.01
				liege = {
					religion_group = ROOT
					NOT = { religion_group = pagan_group }
					NOT = { religion = ROOT }
				}
			}
			modifier = {
				factor = 0.1
				liege = {
					culture_group = ROOT
					NOT = { culture = ROOT }
				}
			}
			modifier = {
				factor = 0
				NOT = {
					independent = yes
					liege = { is_republic = yes }
					is_patrician = yes
					leads_faction = faction_prosperity
					in_faction = faction_prosperity
					trait = fortune_builder
					trait = midas_touched
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					liege = { is_feudal = yes }
					liege = { is_theocracy = yes }
					independent = yes
				}
				NOT = {
					trait = indulgent_wastrel
					trait = thrifty_clerk
					trait = fortune_builder
					trait = midas_touched
				}
			}
			modifier = {
				factor = 0.5
				liege = { is_republic = yes }
				NOT = {
					is_patrician = yes
					trait = indulgent_wastrel
					trait = thrifty_clerk
					trait = fortune_builder
					trait = midas_touched
				}
			}
			modifier = {
				factor = 1.5
				trait = thrifty_clerk
			}
			modifier = {
				factor = 2.5
				trait = fortune_builder
			}
			modifier = {
				factor = 5
				trait = midas_touched
			}
			modifier = {
				factor = 10
				OR = {
					is_patrician = yes
					is_republic = yes
				}
			}
			#feudal liege has less than 5 feudal vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					NOT = {
						any_vassal = { 
							is_feudal = yes
							higher_tier_than = BARON
							count = 5
						}
					}
				}
			}
			#feudal liege has a republic vassal and less than 10 feudal vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					any_vassal = {
						is_republic = yes
						higher_tier_than = BARON
					}
					NOT = {
						any_vassal = {
							is_republic = yes
							higher_tier_than = BARON
							count = 2
						}
					}
					NOT = {
						any_vassal = { 
							is_feudal = yes
							higher_tier_than = BARON
							count = 10
						}
					}
				}
			}
			#feudal liege has two republic vassals and less than 20 feudal vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					any_vassal = {
						is_republic = yes
						higher_tier_than = BARON
						count = 2
					}
					NOT = {
						any_vassal = {
							is_republic = yes
							higher_tier_than = BARON
							count = 3
						}
					}
					NOT = {
						any_vassal = { 
							is_feudal = yes
							higher_tier_than = BARON
							count = 20
						}
					}
				}
			}
			#feudal liege has three republic vassals and less than 30 feudal vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					any_vassal = {
						is_republic = yes
						higher_tier_than = BARON
						count = 3
					}
					NOT = {
						any_vassal = {
							is_republic = yes
							higher_tier_than = BARON
							count = 4
						}
					}
					NOT = {
						any_vassal = {
							is_feudal = yes
							higher_tier_than = BARON
							count = 30
						}
					}
				}
			}
			#feudal liege has four republic vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					any_vassal = {
						is_republic = yes
						higher_tier_than = BARON
						count = 4
					}
				}
			}
		}
	}
	
	convert_to_theocracy_vassal = {
		is_high_prio = yes
		only_rulers = yes
		ai_check_interval = 40 
 potential = { ai = no
			is_tribal = yes
			independent = no
			ai = yes
			NOT = { religion_group = muslim }
			is_ruler = yes
			any_demesne_title = {
				tier = baron
				holding_type = tribal
			}
		}
		allow = {
			war = no
			is_adult = yes
			OR = {
				is_female = no
				religion_allows_female_temple_holders = yes
			}
			liege = {
				OR = {
					is_feudal = yes
					is_republic = yes
					is_theocracy = yes
				}
			}
			capital_holding = {
				OR = {
					holding_type = temple
					AND = {
						holding_type = tribal
						has_building = tb_market_town_4
					}
					AND = {
						holding_type = tribal
						has_building = tb_hillfort_4
					}
				}
			}
		}
		effect = {
			#upgrade tribal holdings which have full market towns
			any_demesne_province = {
				limit = {
					any_province_holding = {
						holding_type = tribal
						OR = {
							has_building = tb_market_town_4
							has_building = tb_hillfort_4
						}
					}
				}
				any_province_holding = {
					limit = { 
						holding_type = tribal
						OR = {
							has_building = tb_market_town_4
							has_building = tb_hillfort_4
						}
					}
					set_title_flag = refill_levy
					convert_to = temple
					hidden_tooltip = {
						refill_holding_levy = yes
					}
				}
				hidden_tooltip = {
					add_province_modifier = {
						name = new_buildings_timer
						duration = 36500
						hidden = yes
					}
				}
			}
	
			set_government_type = theocracy_government
			
			hidden_tooltip = {
				any_demesne_title = {
					if = {
						limit = { is_crown_law_title = yes }
						set_title_flag = do_not_destroy
					}
				}
				liege = {
					character_event = { id = 55100 } # Notify Liege
				}
				character_event = { id = Plus.352 days = 3 } #refill the levies
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.2
				always = yes
			}
			modifier = {
				factor = 0
				any_demesne_title = {
					tier = baron
					holding_type = tribal
					NOT = { has_building = tb_market_town_4 }
					NOT = { has_building = tb_hillfort_4 }
					location = { NOT = { religion = ROOT } }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { religion = ROOT }
					relative_power = { who = ROOT power = 0.75 }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					count = 2
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { religion = ROOT }
					relative_power = { who = ROOT power = 0.5 }
				}
			}
			modifier = {
				factor = 0
				any_vassal = {
					count = 3
					higher_tier_than = BARON
					is_tribal = yes
					NOT = { religion = ROOT }
					relative_power = { who = ROOT power = 0.25 }
				}
			}
			modifier = {
				factor = 0.01
				liege = {
					NOT = { culture_group = ROOT }
				}
			}
			modifier = {
				factor = 0.1
				liege = {
					culture_group = ROOT
					NOT = { culture = ROOT }
				}
			}
			modifier = {
				factor = 0
				liege = { NOT = { religion = ROOT } }
			}
			modifier = {
				factor = 0.1
				NOT = { trait = radical }
			}
			modifier = {
				factor = 0
				NOT = {
					independent = yes
					liege = { is_theocracy = yes }
					leads_faction = faction_tradition
					in_faction = faction_tradition
					trait = scholarly_theologian
					trait = mastermind_theologian
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					liege = { is_feudal = yes }
					liege = { is_republic = yes }
					independent = yes
				}
				NOT = {
					trait = detached_priest
					trait = martial_cleric
					trait = scholarly_theologian
					trait = mastermind_theologian
				}
			}
			modifier = {
				factor = 0.5
				liege = { is_theocracy = yes }
				NOT = {
					trait = detached_priest
					trait = martial_cleric
					trait = scholarly_theologian
					trait = mastermind_theologian
				}
			}
			modifier = {
				factor = 1.5
				trait = scholarly_theologian
			}
			modifier = {
				factor = 2.5
				trait = mastermind_theologian
			}
			modifier = {
				factor = 10
				is_theocracy = yes
			}
			#feudal liege has less than 5 feudal vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					NOT = {
						any_vassal = { 
							is_feudal = yes
							higher_tier_than = BARON
							count = 5
						}
					}
				}
			}
			#feudal liege has a theocracy vassal and less than 10 feudal vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					any_vassal = {
						is_theocracy = yes
						higher_tier_than = BARON
					}
					NOT = {
						any_vassal = {
							is_theocracy = yes
							higher_tier_than = BARON
							count = 2
						}
					}
					NOT = {
						any_vassal = { 
							is_feudal = yes
							higher_tier_than = BARON
							count = 10
						}
					}
				}
			}
			#feudal liege has two theocracy vassals and less than 20 feudal vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					any_vassal = {
						is_theocracy = yes
						higher_tier_than = BARON
						count = 2
					}
					NOT = {
						any_vassal = {
							is_theocracy = yes
							higher_tier_than = BARON
							count = 3
						}
					}
					NOT = {
						any_vassal = { 
							is_feudal = yes
							higher_tier_than = BARON
							count = 20
						}
					}
				}
			}
			#feudal liege has three theocracy vassals and less than 30 feudal vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					any_vassal = {
						is_theocracy = yes
						higher_tier_than = BARON
						count = 3
					}
					NOT = {
						any_vassal = {
							is_theocracy = yes
							higher_tier_than = BARON
							count = 4
						}
					}
					NOT = {
						any_vassal = {
							is_feudal = yes
							higher_tier_than = BARON
							count = 30
						}
					}
				}
			}
			#feudal liege has four theocracy vassals
			modifier = {
				factor = 0
				independent = no
				liege = {
					is_feudal = yes
					any_vassal = {
						is_theocracy = yes
						higher_tier_than = BARON
						count = 4
					}
				}
			}
		}
	}
	
	ai_destroy_custom_title = {
		is_high_prio = yes
		ai_check_interval = 40 
 potential = { ai = no
			ai = yes
			any_demesne_title = {
				higher_tier_than = DUKE
				is_titular = yes
				has_title_flag = custom_created_title
				ROOT = {
					any_demesne_title = {
						tier = PREVPREV
						is_titular = no
						temporary = no
						is_primary_type_title = no
						is_landless_type_title = no
					}
				}
			}
		}
		allow = {
			war = no
		}
		effect = {
			random_demesne_title = {
				limit = {
					higher_tier_than = DUKE
					is_titular = yes
					has_title_flag = custom_created_title
					ROOT = {
						any_demesne_title = {
							tier = PREVPREV
							is_titular = no
							temporary = no
							is_primary_type_title = no
							is_landless_type_title = no
						}
					}
				}
				destroy_landed_title = THIS
			}
		}
		ai_will_do = {
			factor = 1
		}
	}

	become_merchant_republic = {
		is_high_prio = yes
		only_rulers = yes
		ai_check_interval = 40 
 potential = { ai = no
			has_dlc = "Charlemagne"
			OR = {
				ai = yes
				has_dlc = "The Republic"
			}
			OR = {
				independent = yes
				liege = {
					NOT = { any_demesne_title = { temporary = yes } }
					higher_real_tier_than = DUKE
					war = no
				}
			}
			is_ruler = yes
			is_republic = yes
			is_merchant_republic = no
			is_patrician = no
			real_tier = COUNT
			NOT = {
				any_demesne_title = { temporary = yes }
				has_character_modifier = do_not_disturb
			}
		}
		allow = {
			capital_scope = {
				port = yes
				TECH_TRADE_PRACTICES = 1
				OR = {
					custom_tooltip = {
						text = TT_NOT_UNREFORMED_PAGAN
						hidden_tooltip = {
							OR = {
								ROOT = { NOT = { religion_group = pagan_group } }
								ROOT = { is_reformed_religion = yes }
							}
						}
					}
					TECH_TRADE_PRACTICES = 3
				}
			}		
			war = no
			has_regent = no
			piety = 0
			wealth = 250
			prestige = 250
		}
		effect = {
			wealth = -250
			prestige = -250
			if = {
				limit = { independent = no }
				liege = { save_event_target_as = current_liege }
			}
			if = {
				limit = { dynasty = none }
				dynasty = father_bastard
			}
			any_demesne_title = {
				limit = {
					OR = {
						NOT = { has_law = succ_seniority }
						NOT = { has_law = agnatic_succession }
					}
				}
				if = {
					limit = { NOT = { has_law = succ_seniority } }
					add_law = succ_seniority
				}
				if = {
					limit = { NOT = { has_law = agnatic_succession } }
					add_law = agnatic_succession
				}
			}
			primary_title = {
				create_title = {
					tier = DUKE
					landless = no
					temporary = no
					custom_created = yes
					culture = ROOT
					holder = ROOT
					base_title = THIS
					copy_title_laws = yes
				}
			}
			if = {
				limit = { event_target:current_liege = { is_alive = yes } }
				set_defacto_liege = event_target:current_liege
				pf_liege_change_effect = yes
			}
			primary_title = { set_title_flag = custom_created_title }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					trait = ambitious
					trait = proud
					trait = midas_touched
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = content
					trait = humble
					trait = inbred
					is_dumb_trigger = yes
					NOT = { stewardship = 8 }
				}
			}
		}
	}
}

